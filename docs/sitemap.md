## Спецификация sitemap.json

Структура сайта описывается файлом [`sitemap.json`](configs/common/sitemap.json).
Этот файл представляет из себя древовидную структуру сайта. Структурной единицей
такой древовидной структуры является узел или "нода" (node). Каждый узел в свою очередь может содержать
"дочерние" узлы.

При запуске приложения данный файл загружается, парсится и обрабатывается. На основе данных этого файла
происходит построение роутов (маршрутов) и загрузка данных.

Часть узлов не описывается явно в sitemap.json а строится динамически по загруженным данным
и встраивается в модель при запуске приложения. К таким узлам относятся пункты меню авторов, переводчиков и тегов.

### Аттрибуты узла:

#### `title`

 Текст пункта меню (также входит в title страницы при отсутствии связанного ресурса).
 Может записываться в виде строки - при этом для всех локалей текст будет одинаков. Возможность локализации `title` получается
 путем записи значения этого аттрибута в виде объекта с языковыми ключами, например:

```
"title": {
    "en": "Tools",
    "ru": "Инструменты"
}
```

#### `route`

Данные для построения маршрута (роута) для отображения данных, связанных с узлом.
В приложении используется роутер [`susanin`](https://github.com/nodules/susanin)
Узлы "верхнего" уровня, которые являются корневыми для основных разделов сайта содержат общую информацию о роуте -
объект с полями `name` и `pattern`, например:

```
"route": {
    "name": "method",
    "pattern": "/method(/<id>)(/)"
}
```

Узлы нижележащих уровней содержат условия с параметрами, которые при поставновке в `pattern` дают нужный роут, должны
содержать условия `conditions`, например:

```
"route": {
    "conditions" : {
        "id" : "definitions"
    }
}
```

При старте приложения происходит "склейка" роутовых аттрибутов для семейста узлов, что дает возможность получить
полный конфигурационный объект для построения роута. Кроме того, для каждого узла на этапе его обработки и при наличии
аттрибута `route`, происходит построение и присваивание (если он не указан явно) аттрибута `url` - адреса по которому
будет произведен переход при нажатии на пункт меню.

#### `source`

Cсылка на связанные данные. Тип: строка. Необязательный параметр.
Сейчас записывается как https - адрес блока с документацией на github, например:
`https://github.com/bem/bem-method/tree/bem-info-data/method/definitions`

#### `view`

Мода представления блока `content` для узла. Тип: строка. Необязательный параметр. Определяет общий вид страницы
соответствующей узлу. Явно указывается для нестандартных экранов (главная страница, авторы, теги и.т.д). Если данный
аттрибут не указан и есть аттрибут `source`, то значением `view` будет `post`. Если аттрибут `source` отсутствует,
`view` будет присвоено значение `posts`.

#### `type`

Тип пункта меню. Тип: строка. Необязательный параметр. Допустимые значения `simple`, `group`, `delimeter`.
Явное указание необходимо только для пунктов меню которые являются разделителями `delimeter`. Если `type` не указан, то
в случае отсутствия аттрибутов `route` и `url` аттрибуту `type` присваивается значение `group`. Если аттрибут `route`
отсутствует, но присутствует `url` аттрибуту `type` присваивается значение `simple`. Если аттрибут `route`
присутствует, то выставляется значение `simple`.

#### `url`

Ссылка для пункта меню. Тип: строка. Необязательный параметр. Явное указание требуется только для пунктов меню,
ведущих на внешние ресурсы. Для всех остальных генерируется автоматически по построенным маршрутам.

#### `size`

Значение определяющее рамер пункта меню. Тип: строка. Необязательный параметр. Допустимые значения: `normal`, `small`.
Значение по умолчанию `normal`. Явно необходим только для некоторых пунктов главного меню, которые имею размер отличный от стандартного.

#### `dynamic`

Якорь для отметки узла, дочерние узлы которого будут достроены и присоеденены динамически при старте приложения.
Тип: строка. Необязательный параметр.

#### `items`

Массив дочерних узлов. Тип: массив. Необязательный параметр.