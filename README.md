legoa
=====

http://planner.yandex-team.ru/project/10690

### Заметки ###

#### Фаловая структура

    # Хранилище

    datasrc/
      .bem/
        cache/
          # каждую библиотеку (и ее депенды) сливаем в кеш плоским списком (1)

          025b3385f5538eca3f2fffed4d375aef9cc4d329/
          345a0e972d28d19623a2f0ee1910857b806f5434/
          3717c40df3d5afa17ca728774d2c32dbceb61030/
          ...
        make.js

      # документацию к библиотеки (из данных кеша) собираем в директории `_{{имя-библиотеки}}` (2)

      _islands-popups/
        blocks/
          popup.data.json
          dropdown.json.js
          ...

###### Примечания

**1) Ключ в кеше должен быть хеш-суммой от данных библиотеки (url+treeish), чтобы депенды одной
библиотеки не аффектили других**

Внутренние депенды библиотек (`islands-controls➝bem-controls`) заменяем на `type=symlink`
с относительным путем в кеш. Это должно сократить общее время на сборку всего. Плюс, независимо
от того как устроенна библиотека, интроспекция по библеотеке будет продолжать работать: ссылки
на уровни, технологии и пр.

**2) В `blocks` складываем собранную по-уровням документацию каждого блока библиотеки
в JSON-формате.**

Полученный JSON загружается в рантайме и через `bemtree.xjst` + `bemhtml` генерируется страница.

### Как поднять копию ###

TODO:

#### 1. Клонируем

```
› git clone git://<...>.git ~/web/legoa
› cd ~/web/legoa
```

#### 2. Устанавливаем зависимости

```
› npm install
› bem make vendor
```

#### 3. Собираем, запускаем

```
› bem make
› npm start
```

После этого идем браузером `http://legoa.<username>.coal.dev.yandex-team.ru`

