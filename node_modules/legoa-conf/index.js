var PATH = require('path'),
    UTIL = require('util'),
    join = PATH.join,

    APP_ROOT = PATH.resolve(__dirname, '../../'),
    BUNDLES_ROOT = join(APP_ROOT, 'desktop.bundles'),
    BUNDLES_PATH = PATH.relative(APP_ROOT, BUNDLES_ROOT),
    COMMON_BUNDLE_NAME = 'common',

    conf = {
        app_root : APP_ROOT,
        bundles_root : BUNDLES_ROOT,
        bundles_path : BUNDLES_PATH,
        common_bundle_name : COMMON_BUNDLE_NAME,
        common_bundle_path : UTIL.format('/%s/%s/', BUNDLES_PATH, COMMON_BUNDLE_NAME),
    },
    hostsConf = {},
    appConf = {};

// hosts details
try {
    hostsConf = require('../../configs/current/hosts');
} catch(e) {
    console.error(e);
}

// app settings
try {
    appConf = require('../../configs/current/node');
} catch(e) {
    console.error(e);
}

conf.hosts = hostsConf

Object.keys(appConf).forEach(function(k) {
    conf[k] = appConf[k];
});

module.exports = conf;
